(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4d46"],{"+KDE":function(e,t,i){"use strict";var a=i("gDS+"),s=i.n(a),n=i("EVdn"),o=i.n(n),l=(i("Kw5r"),i("N9E5")),r=i("t3Un"),u={filters:{statusFilter:function(e){var t="pass";"不通过"===e&&(t="refuse");return{pass:"success",refuse:"danger"}[t]},parseTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+(t.getDate()+" ")+(t.getHours()<10?"0"+t.getHours()+":":t.getHours()+":")+(t.getMinutes()<10?"0"+t.getMinutes()+":":t.getMinutes()+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}},props:{type:{type:String,default:"toVerify"},list:{type:Array,default:l.a.toVerify}},data:function(){return{listQuery:{page:1,limit:5,type:this.type,sort:"+id"},loading:!1,dialogVisible:!1,curRow:0,multipleSelection:[]}},created:function(){},methods:{handleVerify:function(e,t){this.dialogVisible=!0,this.curRow=t},requestVerify:function(e){},pass:function(e){var t=this;console.log(this.list[e].userId);var i={multipleUserId:this.list[e].userId,handleResult:"pass"};o.a.ajax({type:"POST",url:r.a.BASEURL+"/handleRegister",xhrFields:{withCredentials:!0},contentType:"application/json",headers:{Authorization:localStorage.getItem("token")},data:s()(i),success:function(i){console.log(i.handleSubmit),"success"===i.handleSubmit?(l.a.toVerify[e].status="通过",l.a.verified.splice(0,0,l.a.toVerify[e]),l.a.toVerify.splice(e,1),console.log(l.a.verified),console.log(l.a.toVerify),t.dialogVisible=!1):"fail"===i.handleSubmit&&t.$message({message:"网络故障请重试",type:"warning"})},error:function(e){console.log(e.status)}})},refuse:function(e){var t=this,i={multipleUserId:this.list[e].userId,handleResult:"refuse"};o.a.ajax({type:"POST",url:r.a.BASEURL+"/handleRegister",xhrFields:{withCredentials:!0},contentType:"application/json",headers:{Authorization:localStorage.getItem("token")},data:s()(i),success:function(i){console.log(i.handleSubmit),"success"===i.handleSubmit?(l.a.toVerify[e].status="不通过",l.a.verified.splice(0,0,l.a.toVerify[e]),l.a.toVerify.splice(e,1),t.dialogVisible=!1):t.$message({message:"网络故障请重试",type:"warning"})},error:function(e){console.log(e.status)}})},handleSelectionChange:function(e){this.multipleSelection=e,console.log(this.multipleSelection)},passMultiple:function(){for(var e=this,t=[],i=0;i<this.multipleSelection.length;i++)t.push(this.multipleSelection[i].userId);var a=t.join(",");console.log(a);var n={multipleUserId:a,handleResult:"pass"},u=[];o.a.ajax({type:"POST",url:r.a.BASEURL+"/handleRegister",xhrFields:{withCredentials:!0},contentType:"application/json",headers:{Authorization:localStorage.getItem("token")},data:s()(n),success:function(t){console.log("批量通过",t.handleSubmit),"success"===t.handleSubmit?(e.multipleSelection.forEach(function(e,t){e.state="通过",l.a.verified.splice(0,0,e)}),e.multipleSelection.forEach(function(e,t){u.push(e.userId)}),console.log("tempList",u),l.a.toVerify.forEach(function(e,t){u.forEach(function(i,a){-1!==e.userId.indexOf(i)&&l.a.toVerify.splice(t,1)})}),e.multipleSelection=[],console.log("更新后的待审核list",l.a.toVerify),console.log("verifiedList",l.a.verified)):"fail"===t.handleSubmit&&e.$message({message:"网络故障请重试",type:"warning"})},error:function(e){console.log(e.status)}})}}},c=(i("XnWG"),i("KHd+")),d=Object(c.a)(u,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:"toVerify"==e.type,expression:"type=='toVerify'"}],staticClass:"outside"},[i("el-button",{attrs:{type:"primary",plain:"",id:"passMultiple"},on:{click:e.passMultiple}},[e._v("批量通过")])],1),e._v(" "),i("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{align:"center",type:"selection",width:"65","element-loading-text":"请给我点时间！"}}),e._v(" "),i("el-table-column",{attrs:{width:"65px",align:"center",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row?i("span",[e._v(e._s(t.$index+1))]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{width:"180px",align:"center",label:"申请人"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row?i("span",[e._v(e._s(t.row.userName))]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{width:"180px",align:"center",label:"申请人ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row?i("span",[e._v(e._s(t.row.userId))]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{"min-width":"300px",label:"申请权限",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row?i("span",[e._v(e._s(t.row.userRole))]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{width:"155px",align:"center",label:"申请日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row?i("span",[e._v(e._s(e._f("parseTime")(t.row.createDate,t.row.createDate)))]):e._e()]}}])}),e._v(" "),"toVerify"===e.type?i("el-table-column",{attrs:{align:"center",label:"操作",width:"150","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row?i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){e.handleVerify(t.row,t.$index)}}},[e._v("去审核")]):e._e()]}}])}):e._e(),e._v(" "),"verified"===e.type?i("el-table-column",{attrs:{"class-name":"status-col",label:"状态",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{attrs:{type:e._f("statusFilter")(t.row.status)}},[e._v(e._s(t.row.status))])]}}])}):e._e()],1),e._v(" "),i("el-dialog",{attrs:{title:"审核",visible:e.dialogVisible,width:"722px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:[e.list[e.curRow]],border:""}},[i("el-table-column",{attrs:{label:"申请人",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row?i("span",[e._v(e._s(t.row.userName)+"("+e._s(t.row.userId)+")")]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"申请职位",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row?i("span",[e._v(e._s(t.row.userRole))]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"身份证信息",width:"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row?i("img",{attrs:{src:"http://47.100.1.211:8082/photo/"+t.row.userImage,alt:"身份证照片加载失败",width:"300px",height:"190px"}}):e._e()]}}])})],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"danger",round:""},on:{click:function(t){e.refuse(e.curRow)}}},[e._v("不通过")]),e._v(" "),i("el-button",{attrs:{type:"success",round:""},on:{click:function(t){e.pass(e.curRow)}}},[e._v("通过")])],1)],1)],1)},[],!1,null,"06f0dce8",null);d.options.__file="tabPane.vue";t.a=d.exports},AXJZ:function(e,t,i){"use strict";i.r(t);var a=i("VmIv").a,s=(i("gnHG"),i("KHd+")),n=Object(s.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tab-container"},[i("el-tabs",{staticStyle:{"margin-top":"15px"},attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.tabMapOptions,function(t){return i("el-tab-pane",{key:t.key,attrs:{label:t.label,name:t.key}},[i("tab-pane",{directives:[{name:"show",rawName:"v-show",value:e.activeName==t.key,expression:"activeName==item.key"}],attrs:{type:t.key,list:e.list}})],1)}))],1)},[],!1,null,"12c44895",null);n.options.__file="index.vue";t.default=n.exports},Ae2D:function(e,t,i){},PDam:function(e,t,i){},VmIv:function(e,t,i){"use strict";(function(e){var a=i("+KDE"),s=i("Xe+L"),n=i("N9E5"),o=i("t3Un");t.a={name:"Tab",components:{tabPane:a.a,messagePush:s.a},data:function(){return{tabMapOptions:[{label:"待审核",key:"toVerify"},{label:"已审核",key:"verified"}],activeName:"toVerify",createdTimes:0,start:!0,list:[],unCheckedNum:0}},created:function(){this.getToVerifyList(),console.log(this.list)},watch:{activeName:function(e,t){"toVerify"===e?this.list=n.a.toVerify:"verified"===e&&(this.list=n.a.verified)}},methods:{getToVerifyList:function(){var t=this;e.ajax({type:"GET",url:o.a.BASEURL+"/getUnchecked",xhrFields:{withCredentials:!0},headers:{Authorization:localStorage.getItem("token")},success:function(e){console.log(e),!0===e.isAllowed?(n.a.toVerify=e.unCheckedArray,console.log("toVerifyList",n.a.toVerify),t.list=n.a.toVerify,t.unCheckedNum=e.unCheckedNum):t.$message({message:"您的登录已过期，请重新登录！",type:"warning"})},error:function(e){console.log(e.status)}})}}}}).call(this,i("EVdn"))},XnWG:function(e,t,i){"use strict";var a=i("Ae2D");i.n(a).a},"gDS+":function(e,t,i){e.exports={default:i("oh+g"),__esModule:!0}},gnHG:function(e,t,i){"use strict";var a=i("PDam");i.n(a).a},"oh+g":function(e,t,i){var a=i("WEpk"),s=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return s.stringify.apply(s,arguments)}}}]);